<!doctype html>
<meta charset=utf-8>
<title>line chart</title>
<link href="css/drawChart.v01.css" rel="stylesheet">

<script src="script/d3.v3.min.js"></script>
<script src="script/drawChart.v01.js"></script>
<body onload="onload()">
  <script>
function onload(){
  //drawTopic();
}
function drawChartFromDiv(div){
  var data=d3.tsv.parse(d3.select(div).html());
    console.log("data: "+JSON.stringify(data));
  data=data.map(function(d){
      return {name:d.ATTRIBUTE_NAME,value:+d.POST_COUNT};
  });
  drawLineChart(data,"#chart");
}
function drawTopic(){
  d3.tsv("http://192.168.1.58/42v/chart/analyse_topic_media.php",function(data){
    data=data.map(function(d){
      var d2={name:d.MEDIA_NAME,value:+d.POST_COUNT};
      return d2;
      });
    console.log("data: "+JSON.stringify(data));
    drawLineChart(data,"#chart");
  });
}
  </script>
  <div id="chart"></div>
  <button onclick="drawTopic();">topic</button>
  <pre id="data" onclick="drawChartFromDiv(this)">POST_COUNT	ID	ATTRIBUTE_NAME
4	1	油耗
5	2	内饰
2	3	产地
4	4	外观
4	5	价格</pre>
  <pre id="data2" onclick="drawChartFromDiv(this)">
POST_COUNT	ATTRIBUTE_NAME
10	2010-08-01
94	2010-08-02
26	2010-08-03
21	2010-08-04
11	2010-08-05
38	2010-08-06
21	2010-08-07
25	2010-08-08
25	2010-08-09
32	2010-08-10
151	2010-08-11
39	2010-08-12
16	2010-08-13
17	2010-08-14
32	2010-08-15
5	2010-08-16
48	2010-08-17
104	2010-08-18
52	2010-08-19
13	2010-08-20
7	2010-08-21
4	2010-08-22
11	2010-08-23
14	2010-08-24
10	2010-08-25
9	2010-08-26
8	2010-08-27
9	2010-08-28
10	2010-08-29
33	2010-08-30
18	2010-08-31
17	2010-09-01
18	2010-09-02
10	2010-09-03
6	2010-09-04
6	2010-09-05
15	2010-09-06
8	2010-09-07
12	2010-09-08
57	2010-09-09
14	2010-09-10
9	2010-09-11
17	2010-09-12
10	2010-09-13
11	2010-09-14
43	2010-09-15
43	2010-09-16
30	2010-09-17
28	2010-09-18
67	2010-09-19
30	2010-09-20
17	2010-09-21
11	2010-09-22
19	2010-09-23
25	2010-09-24
44	2010-09-25
12	2010-09-26
7	2010-09-27
5	2010-09-28
40	2010-09-29
36	2010-09-30</pre>
</body>